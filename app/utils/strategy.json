[
  {
    "strategy_name": "볼린저 중심선 재돌파 추세 추종",
    "indicators": [
      {
        "key": "bb.20",
        "type": "bollinger_bands",
        "params": { "length": 20, "stddev": 2 }
      }
    ],
    "rules": {
      "buy_condition": {
        "entry": [
          {
            "type": "touched_within",
            "within": 10,
            "condition": {
              "type": "compare",
              "lhs": "close",
              "op": "<=",
              "rhs": "bb.20.lower"
            }
          },
          { "type": "crosses_above", "lhs": "close", "rhs": "bb.20.middle" }
        ],
        "exit": [
          { "type": "crosses_below", "lhs": "close", "rhs": "bb.20.middle" }
        ]
      },
      "sell_condition": {
        "entry": [
          {
            "type": "touched_within",
            "within": 10,
            "condition": {
              "type": "compare",
              "lhs": "close",
              "op": ">=",
              "rhs": "bb.20.upper"
            }
          },
          { "type": "crosses_below", "lhs": "close", "rhs": "bb.20.middle" }
        ],
        "exit": [
          { "type": "crosses_above", "lhs": "close", "rhs": "bb.20.middle" }
        ]
      }
    }
  },

  {
    "strategy_name": "EMA20/EMA60 골든·데드 크로스",
    "indicators": [
      { "key": "ema.20", "type": "ema", "params": { "length": 20 } },
      { "key": "ema.60", "type": "ema", "params": { "length": 60 } }
    ],
    "rules": {
      "buy_condition": {
        "entry": [
          { "type": "crosses_above", "lhs": "ema.20", "rhs": "ema.60" }
        ],
        "exit": [{ "type": "crosses_below", "lhs": "ema.20", "rhs": "ema.60" }]
      },
      "sell_condition": {
        "entry": [
          { "type": "crosses_below", "lhs": "ema.20", "rhs": "ema.60" }
        ],
        "exit": [{ "type": "crosses_above", "lhs": "ema.20", "rhs": "ema.60" }]
      }
    }
  },

  {
    "strategy_name": "EMA20 괴리율 평균회귀",
    "indicators": [
      { "key": "ema.20", "type": "ema", "params": { "length": 20 } }
    ],
    "derived": [
      {
        "key": "dev.ema20",
        "type": "deviation_pct",
        "formula": "(close - ema.20) / ema.20 * 100"
      }
    ],
    "params": { "entry_dev_abs": 1.0, "exit_dev_abs": 0.5 },
    "rules": {
      "buy_condition": {
        "entry": [
          {
            "type": "threshold",
            "lhs": "dev.ema20",
            "op": "<=",
            "value": -1.0
          },
          { "type": "crosses_above", "lhs": "close", "rhs": "ema.20" }
        ],
        "exit": [
          { "type": "compare", "lhs": "dev.ema20", "op": ">=", "value": 0.5 }
        ]
      },
      "sell_condition": {
        "entry": [
          { "type": "threshold", "lhs": "dev.ema20", "op": ">=", "value": 1.0 },
          { "type": "crosses_below", "lhs": "close", "rhs": "ema.20" }
        ],
        "exit": [
          { "type": "compare", "lhs": "dev.ema20", "op": "<=", "value": -0.5 }
        ]
      }
    }
  },
  {
    "strategy_name": "볼린저 스퀴즈 돌파 + 밴드워킹",
    "indicators": [
      {
        "key": "bb.20",
        "type": "bollinger_bands",
        "params": { "length": 20, "stddev": 2 }
      }
    ],
    "derived": [
      {
        "key": "bbwidth.20",
        "type": "formula",
        "formula": "(bb.20.upper - bb.20.lower) / bb.20.middle"
      },
      {
        "key": "slope.bb20.mid",
        "type": "formula",
        "formula": "bb.20.middle - shift(bb.20.middle, 1)"
      }
    ],
    "params": { "sq_thresh": 0.04 },
    "rules": {
      "buy_condition": {
        "entry": [
          {
            "type": "threshold",
            "lhs": "bbwidth.20",
            "op": "<=",
            "value": 0.04
          },
          { "type": "compare", "lhs": "slope.bb20.mid", "op": ">", "value": 0 },
          { "type": "crosses_above", "lhs": "close", "rhs": "bb.20.upper" }
        ],
        "exit": [
          { "type": "crosses_below", "lhs": "close", "rhs": "bb.20.middle" }
        ]
      },
      "sell_condition": {
        "entry": [
          {
            "type": "threshold",
            "lhs": "bbwidth.20",
            "op": "<=",
            "value": 0.04
          },
          { "type": "compare", "lhs": "slope.bb20.mid", "op": "<", "value": 0 },
          { "type": "crosses_below", "lhs": "close", "rhs": "bb.20.lower" }
        ],
        "exit": [
          { "type": "crosses_above", "lhs": "close", "rhs": "bb.20.middle" }
        ]
      }
    }
  }
]
